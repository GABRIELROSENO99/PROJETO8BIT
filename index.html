<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>Gui The Kid - Vencendo a CLT</title>

    <style>
        * { box-sizing: border-box; }
        body {
            margin: 0; overflow: hidden; display: flex; justify-content: center; align-items: center;
            min-height: 100vh; background: linear-gradient(135deg, #2c1810, #1a0d00);
            font-family: 'Courier New', monospace; touch-action: none; user-select: none;
        }
        canvas {
            display: block; max-width: 100%; max-height: 100%;
            image-rendering: pixelated; image-rendering: -moz-crisp-edges; image-rendering: crisp-edges;
            box-shadow: 0 0 30px rgba(255,100,0,0.6); border: 6px solid #ff6600; border-radius: 16px;
        }
        #loading {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            color: #ffaa00; font-size: 2.2rem; font-weight: bold; text-align: center;
            text-shadow: 0 0 20px #ff6600; animation: glow 1.2s infinite; pointer-events: none; z-index: 200;
        }
        @keyframes glow {
            0%,100% { opacity: 0.8; transform: translate(-50%, -50%) scale(1); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1.08); }
        }
        @media (max-width: 600px) {
            canvas { width: 100vw !important; height: 100vh !important; border-radius: 0; border: none; }
            #loading { font-size: 1.6rem; }
        }
    </style>
</head>
<body>
    <div id="loading">CARREGANDO PIXEL ART...</div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.js"></script>
    <script>
        // ===================================
        // GUI THE KID - PIXEL ART PERFEITO
        // Estilo id√™ntico √† imagem - Sem erros!
        // ===================================

        let gui, chaoY, obstaculos = [], itens = [], nuvens = [];
        let velocidadeJogo = 3.5, gameState = 'running', vida = 100, dinheiro = 0, fase = 1;
        let score = 0, cameraX = 0, shake = 0;
        let pixelSize = 4; // Tamanho dos pixels para pixel art n√≠tido
        let canJump = true; // Flag para pulo simples

        // Paleta de cores da imagem
        const COLORS = {
            skyDay: [146, 191, 226],
            skyNight: [86, 101, 155],
            building1: [77, 57, 122],
            building2: [120, 85, 173],
            ground: [79, 59, 44],
            guiShirt: [200, 220, 255],
            guiPants: [100, 140, 220],
            guiHair: [90, 60, 30],
            guiSkin: [255, 200, 150],
            cone: [255, 140, 0],
            trash: [90, 90, 90],
            homeless: [60, 50, 40],
            money: [255, 230, 100],
            controller: [50, 180, 255]
        };

        function setup() {
            createCanvas(min(1000, windowWidth), min(600, windowHeight));
            pixelDensity(1);
            textFont('monospace');
            textAlign(CENTER, CENTER);
            chaoY = height * 0.75;
            
            gui = new Gui();
            for(let i=0; i<5; i++) nuvens.push(new Nuvem());
        }

        function draw() {
            // C√©u gradiente p√¥r do sol (igual √† imagem)
            for(let y=0; y<height; y++) {
                let inter = map(y, 0, height*0.6, 0, 1);
                let c = lerpColor(color(200,120,80), color(50,30,60), inter);
                stroke(c); line(0, y, width, y);
            }

            // Desenhar nuvens
            for(let nuvem of nuvens) nuvem.draw();

            if(gameState === 'running') {
                updateGame();
            } else if(gameState === 'gameover') {
                drawGameOver();
            } else if(gameState === 'vitoria') {
                drawVitoria();
            }
            
            drawHUD();
        }

        function updateGame() {
            cameraX += velocidadeJogo;
            score += 1;
            
            // Shake ao pular
            shake *= 0.9;
            
            // Spawn elementos
            if(frameCount % 120 === 0) obstaculos.push(new Obstaculo());
            if(frameCount % 180 === 0) itens.push(new Item());
            
            // Atualizar nuvens (parallax)
            for(let nuvem of nuvens) nuvem.update();
            
            // Atualizar obst√°culos
            for(let i=obstaculos.length-1; i>=0; i--) {
                let obs = obstaculos[i];
                obs.update();
                obs.draw();
                if(gui.colide(obs)) {
                    vida -= 25;
                    obstaculos.splice(i, 1);
                    shake = 8;
                    if(vida <= 0) gameOver();
                }
                if(obs.x < -100) obstaculos.splice(i, 1);
            }
            
            // Atualizar itens
            for(let i=itens.length-1; i>=0; i--) {
                let item = itens[i];
                item.update();
                item.draw();
                if(gui.pega(item)) {
                    if(item.tipo === 'dinheiro') dinheiro += 10;
                    else vida = min(100, vida + 40);
                    itens.splice(i, 1);
                }
                if(item.x < -100) itens.splice(i, 1);
            }
            
            // Fases
            if(dinheiro >= 30 && fase === 1) { fase = 2; velocidadeJogo = 4; }
            if(dinheiro >= 70 && fase === 2) { fase = 3; velocidadeJogo = 4.5; }
            if(dinheiro >= 120 && fase === 3) vitoria();
            
            gui.update();
            gui.draw();
            
            drawGround();
        }

        function drawGround() {
            // Ch√£o pixelado
            fill(COLORS.ground);
            rect(0, chaoY, width, height - chaoY);
            // Linhas de rua
            stroke(120);
            for(let x=0; x<width; x+=50) line(x, chaoY, x+25, chaoY);
        }

        // PIXEL ART GUI (ID√äNTICO √Ä IMAGEM - MAIS DETALHADO)
        class Gui {
            constructor() {
                this.x = 120;
                this.y = chaoY;
                this.vy = 0;
                this.w = 28 * pixelSize;
                this.h = 40 * pixelSize;
                this.frame = 0;
                this.puloFrame = 0;
            }
            
            update() {
                this.frame += 0.15;
                
                // F√≠sica suave
                this.vy += 0.8;
                this.y += this.vy;
                if(this.y > chaoY) {
                    this.y = chaoY;
                    this.vy = 0;
                    this.puloFrame = 0;
                    canJump = true;
                }
            }
            
            colide(obs) {
                return this.x < obs.x + obs.w && this.x + this.w > obs.x &&
                       this.y < obs.y + obs.h && this.y + this.h > obs.y;
            }
            
            pega(item) {
                return dist(this.x + this.w/2, this.y + this.h/2, item.x, item.y) < 40;
            }
            
            draw() {
                push();
                translate(this.x, this.y + shake);
                scale(pixelSize);
                
                // Pernas (anima√ß√£o walk cycle - mais fluida)
                let legOffset = sin(this.frame) * 3;
                fill(COLORS.guiPants);
                // Perna esquerda
                rect(6, 26, 5, 14, 1);
                rect(6+legOffset, 34, 5, 6, 1);
                // Perna direita
                rect(17, 26, 5, 14, 1);
                rect(17-legOffset, 34, 5, 6, 1);
                
                // Sapatos
                fill(40);
                rect(6, 38, 6, 3);
                rect(17, 38, 6, 3);
                
                // Cal√ßa
                fill(COLORS.guiPants);
                rect(6, 22, 16, 6, 2);
                
                // Camisa (branca com colarinho azul - igual imagem)
                fill(COLORS.guiShirt);
                rect(4, 10, 20, 14, 2);
                fill(100, 150, 220);
                rect(7, 12, 2, 3); // colarinho
                rect(19, 12, 2, 3);
                
                // Cinto
                fill(60, 40, 20);
                rect(6, 22, 16, 2);
                
                // Cabe√ßa
                fill(COLORS.guiSkin);
                ellipse(14, 6, 14, 14);
                
                // Cabelo cacheado (mais detalhado, como na imagem!)
                fill(COLORS.guiHair);
                ellipse(10, 2, 8, 6);
                ellipse(14, 0, 10, 7);
                ellipse(18, 2, 8, 6);
                // Cachos extras
                fill(70, 40, 10);
                ellipse(12, 1, 4, 3);
                ellipse(16, 1, 4, 3);
                
                // Olhos (expressivos)
                fill(0);
                ellipse(11, 5, 2, 2);
                ellipse(17, 5, 2, 2);
                fill(255);
                ellipse(11.2, 4.8, 1, 1);
                ellipse(17.2, 4.8, 1, 1);
                
                // Boca (sorriso confiante)
                stroke(200, 150, 120);
                strokeWeight(1);
                noFill();
                arc(14, 9, 6, 4, 0, PI);
                noStroke();
                
                // Bra√ßos
                fill(COLORS.guiShirt);
                rect(0, 12, 5, 8, 1);
                rect(23, 12, 5, 8, 1);
                
                // M√£o (polegar para cima na vit√≥ria/pulo)
                fill(COLORS.guiSkin);
                ellipse(2, 15, 4, 4); // m√£o esquerda
                if(this.puloFrame > 0 || gameState === 'vitoria') {
                    ellipse(27, 20, 4, 4); // üëç
                } else {
                    ellipse(27, 15, 4, 4);
                }
                
                pop();
            }
        }

        // OBST√ÅCULOS PIXEL ART (igual imagem - mais detalhes)
        class Obstaculo {
            constructor() {
                this.x = width + 100;
                this.y = chaoY;
                this.tipo = floor(random(4));
                if(this.tipo === 0) { this.w = 12*pixelSize; this.h = 20*pixelSize; } // cone
                else if(this.tipo === 1) { this.w = 16*pixelSize; this.h = 22*pixelSize; } // lixeira
                else if(this.tipo === 2) { this.w = 24*pixelSize; this.h = 18*pixelSize; } // caixa
                else { this.w = 20*pixelSize; this.h = 32*pixelSize; } // morador
            }
            
            update() { this.x -= velocidadeJogo; }
            
            draw() {
                push();
                translate(this.x, this.y + shake);
                scale(pixelSize);
                
                if(this.tipo === 0) { // CONE (com listras)
                    fill(COLORS.cone);
                    triangle(2, 20, 10, 2, 18, 20);
                    fill(255, 50, 0);
                    triangle(4, 15, 10, 8, 16, 15);
                    fill(255, 200, 0);
                    line(5, 12, 15, 12);
                }
                else if(this.tipo === 1) { // LIXEIRA (com tampa)
                    fill(COLORS.trash);
                    rect(2, 8, 12, 14, 2);
                    rect(1, 6, 14, 4, 1);
                    fill(255);
                    ellipse(7, 12, 3, 3);
                    // Lixo interno
                    fill(100);
                    rect(4, 15, 8, 5);
                }
                else if(this.tipo === 2) { // CAIXA (com etiquetas)
                    fill(120, 60, 40);
                    rect(0, 0, 24, 18, 2);
                    fill(200, 150, 100);
                    rect(4, 4, 16, 10, 1);
                    fill(255, 0, 0);
                    textSize(6);
                    text("CLT", 12, 9);
                }
                else { // MORADOR (com express√£o triste)
                    fill(50, 40, 30);
                    ellipse(10, 8, 16, 20); // corpo
                    fill(COLORS.guiSkin);
                    ellipse(10, 4, 10, 10); // rosto
                    fill(0);
                    ellipse(7, 3, 2, 2);
                    ellipse(13, 3, 2, 2);
                    fill(255, 200, 150);
                    arc(10, 7, 6, 4, PI, TWO_PI); // Boca triste
                    // Barba
                    fill(30);
                    rect(8, 8, 4, 3);
                }
                pop();
            }
        }

        // ITENS PIXEL ART (mais bonitos)
        class Item {
            constructor() {
                this.x = width + random(200, 400);
                this.y = chaoY - random(60, 120);
                this.w = 16 * pixelSize;
                this.h = 16 * pixelSize;
                this.tipo = random() > 0.5 ? 'dinheiro' : 'controle';
                this.bounce = 0;
            }
            update() { 
                this.x -= velocidadeJogo * 0.7; 
                this.bounce = sin(frameCount * 0.1) * 2;
            }
            draw() {
                push();
                translate(this.x, this.y + this.bounce + shake);
                scale(pixelSize);
                if(this.tipo === 'dinheiro') {
                    fill(COLORS.money);
                    rect(2, 2, 12, 12, 2);
                    fill(255, 215, 0);
                    textSize(10);
                    text("R$", 8, 11);
                    // Brilho
                    fill(255, 255, 255, 100);
                    ellipse(8, 6, 4, 4);
                } else {
                    fill(COLORS.controller);
                    rect(1, 4, 14, 8, 2);
                    fill(255);
                    ellipse(5, 8, 3, 3);
                    ellipse(11, 8, 3, 3);
                    // Bot√µes
                    fill(255, 0, 0);
                    ellipse(6, 7, 1.5, 1.5);
                    fill(0, 255, 0);
                    ellipse(10, 7, 1.5, 1.5);
                }
                pop();
            }
        }

        // NUVENS PARALLAX
        class Nuvem {
            constructor() {
                this.x = random(width);
                this.y = random(50, 200);
                this.size = random(40, 80);
                this.speed = random(0.2, 0.5);
            }
            update() {
                this.x -= this.speed;
                if(this.x < -this.size) this.x = width + this.size;
            }
            draw() {
                fill(255, 255, 255, 180);
                noStroke();
                ellipse(this.x, this.y, this.size, this.size * 0.6);
                ellipse(this.x + this.size*0.3, this.y, this.size*0.8, this.size*0.5);
                ellipse(this.x - this.size*0.3, this.y, this.size*0.8, this.size*0.5);
            }
        }

        // HUD RETRO (com barra de progresso)
        function drawHUD() {
            // Fundo HUD
            fill(0, 0, 0, 200);
            rect(20, 20, 280, 80, 12);
            
            // Vida (barra)
            fill(255, 50, 50);
            rect(40, 30, vida * 1.6, 20, 8);
            fill(255);
            textSize(16);
            text(`VIDA ${vida}`, 140, 42);
            
            // Dinheiro
            fill(255, 215, 0);
            text(`R$ ${dinheiro}`, 140, 68);
            
            // Fase
            let faseNome = ['MorumBI', '√îNIBUS', 'METR√î', 'JABAQUARA!'][fase-1];
            fill(0, 255, 255);
            textSize(20);
            text(faseNome, 250, 45);
        }

        function drawGameOver() {
            fill(0, 0, 0, 240);
            rect(0, 0, width, height);
            fill(255, 100, 100);
            textSize(60);
            text("GAME OVER", width/2, height/2 - 30);
            fill(255);
            textSize(24);
            text("ESPA√áO ou TOQUE", width/2, height/2 + 30);
        }

        function drawVitoria() {
            fill(100, 255, 100, 240);
            rect(0, 0, width, height);
            fill(255, 215, 0);
            textSize(50);
            text("LEVEL COMPLETE!", width/2, height/2 - 40);
            fill(255);
            textSize(28);
            text(`JABAQUARA! R$ ${dinheiro}`, width/2, height/2 + 20);
            text("Toque para jogar de novo", width/2, height/2 + 50);
        }

        function gameOver() { 
            gameState = 'gameover'; 
            noLoop(); 
        }

        function vitoria() { 
            gameState = 'vitoria'; 
            noLoop(); 
        }

        function keyPressed() {
            if (key === ' ' || key === 'ArrowUp') {
                if(gameState === 'running' && canJump) {
                    gui.vy = -22;
                    gui.puloFrame = 1;
                    canJump = false;
                } else if(gameState !== 'running') {
                    restart();
                }
            }
        }

        function touchStarted() {
            if(gameState === 'running' && canJump) {
                gui.vy = -22;
                gui.puloFrame = 1;
                canJump = false;
            } else if(gameState !== 'running') {
                restart();
            }
            return false;
        }

        function restart() {
            gameState = 'running';
            vida = 100; dinheiro = 0; fase = 1;
            velocidadeJogo = 3.5; obstaculos = []; itens = [];
            canJump = true; shake = 0;
            gui = new Gui();
            loop();
        }

        function windowResized() {
            resizeCanvas(min(1000, windowWidth), min(600, windowHeight));
            chaoY = height * 0.75;
            gui.y = chaoY;
        }

        // Loading
        setTimeout(() => {
            const loading = document.getElementById('loading');
            loading.style.transition = 'opacity 0.5s';
            loading.style.opacity = '0';
            setTimeout(() => loading.style.display = 'none', 500);
        }, 2000);
    </script>
</body>
</html>
